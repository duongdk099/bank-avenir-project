{
  "info": {
    "name": "Bank Project - Complete API Collection",
    "description": "Complete Postman collection for testing the Bank Project backend with all endpoints, authentication, and real-time features.\n\n**Quick Start:**\n1. Run: `npm run start:dev`\n2. Import this collection into Postman\n3. Set environment variable: `baseUrl` = `http://localhost:3000`\n4. Execute requests in order (Auth → Accounts → Orders → Loans)\n5. JWT tokens are auto-saved to environment variables",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "default"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "accountId",
      "value": "",
      "type": "string"
    },
    {
      "key": "orderId",
      "value": "",
      "type": "string"
    },
    {
      "key": "securityId",
      "value": "",
      "type": "string"
    },
    {
      "key": "loanId",
      "value": "",
      "type": "string"
    },
    {
      "key": "conversationId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "1. Authentication",
      "item": [
        {
          "name": "Register Client User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201 || pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.userId) {",
                  "        pm.collectionVariables.set('userId', response.userId);",
                  "        console.log('User ID saved:', response.userId);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"client@bank.com\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"phone\": \"+1234567890\",\n  \"address\": \"123 Main St\",\n  \"city\": \"New York\",\n  \"postalCode\": \"10001\",\n  \"country\": \"USA\",\n  \"dateOfBirth\": \"1990-01-15\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "Register Manager User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201 || pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('Manager registered:', response.userId);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"manager@bank.com\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"Jane\",\n  \"lastName\": \"Smith\",\n  \"phone\": \"+1234567891\",\n  \"address\": \"456 Bank St\",\n  \"city\": \"Boston\",\n  \"postalCode\": \"02101\",\n  \"country\": \"USA\",\n  \"dateOfBirth\": \"1985-05-20\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "Login Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.accessToken) {",
                  "        pm.collectionVariables.set('accessToken', response.accessToken);",
                  "        console.log('Access token saved');",
                  "    }",
                  "    if (response.user && response.user.id) {",
                  "        pm.collectionVariables.set('userId', response.user.id);",
                  "        console.log('User ID saved:', response.user.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"client@bank.com\",\n  \"password\": \"SecurePass123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "2. Accounts",
      "item": [
        {
          "name": "Open Checking Account",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201 || pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.accountId) {",
                  "        pm.collectionVariables.set('accountId', response.accountId);",
                  "        console.log('Account ID saved:', response.accountId);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"accountType\": \"CHECKING\",\n  \"initialDeposit\": 10000\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/accounts/open",
              "host": ["{{baseUrl}}"],
              "path": ["accounts", "open"]
            }
          },
          "response": []
        },
        {
          "name": "Open Savings Account",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"accountType\": \"SAVINGS\",\n  \"initialDeposit\": 50000\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/accounts/open",
              "host": ["{{baseUrl}}"],
              "path": ["accounts", "open"]
            }
          },
          "response": []
        },
        {
          "name": "Get Account by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/accounts/{{accountId}}",
              "host": ["{{baseUrl}}"],
              "path": ["accounts", "{{accountId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Get User Accounts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/accounts/user/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["accounts", "user", "{{userId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Calculate Interest",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/accounts/interest/calculate",
              "host": ["{{baseUrl}}"],
              "path": ["accounts", "interest", "calculate"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "3. Admin (Securities & Settings)",
      "item": [
        {
          "name": "Create Security - AAPL",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201 || pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.security && response.security.id) {",
                  "        pm.collectionVariables.set('securityId', response.security.id);",
                  "        console.log('Security ID saved:', response.security.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"symbol\": \"AAPL\",\n  \"name\": \"Apple Inc.\",\n  \"type\": \"STOCK\",\n  \"exchange\": \"NASDAQ\",\n  \"currentPrice\": 180.50,\n  \"currency\": \"USD\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/securities",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "securities"]
            }
          },
          "response": []
        },
        {
          "name": "Create Security - TSLA",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"symbol\": \"TSLA\",\n  \"name\": \"Tesla Inc.\",\n  \"type\": \"STOCK\",\n  \"exchange\": \"NASDAQ\",\n  \"currentPrice\": 250.00,\n  \"currency\": \"USD\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/securities",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "securities"]
            }
          },
          "response": []
        },
        {
          "name": "Get All Securities",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/securities",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "securities"]
            }
          },
          "response": []
        },
        {
          "name": "Update Security Price",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"price\": 185.75\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/securities/{{securityId}}/price",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "securities", "{{securityId}}", "price"]
            }
          },
          "response": []
        },
        {
          "name": "Create Savings Rate",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountType\": \"SAVINGS\",\n  \"rate\": 0.035,\n  \"minBalance\": 1000,\n  \"effectiveDate\": \"2024-01-01\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/savings-rate",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "savings-rate"]
            }
          },
          "response": []
        },
        {
          "name": "Get Savings Rates",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/savings-rates",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "savings-rates"]
            }
          },
          "response": []
        },
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users"]
            }
          },
          "response": []
        },
        {
          "name": "Update User Role",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"MANAGER\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{userId}}/role",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{userId}}", "role"]
            }
          },
          "response": []
        },
        {
          "name": "Get Dashboard Stats",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/dashboard",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "dashboard"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "4. Orders & Trading",
      "item": [
        {
          "name": "Place Buy Order - AAPL",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201 || pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.orderId) {",
                  "        pm.collectionVariables.set('orderId', response.orderId);",
                  "        console.log('Order ID saved:', response.orderId);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"accountId\": \"{{accountId}}\",\n  \"securityId\": \"{{securityId}}\",\n  \"type\": \"BUY\",\n  \"quantity\": 10,\n  \"price\": 180.50\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": ["{{baseUrl}}"],
              "path": ["orders"]
            }
          },
          "response": []
        },
        {
          "name": "Place Sell Order - AAPL",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"accountId\": \"{{accountId}}\",\n  \"securityId\": \"{{securityId}}\",\n  \"type\": \"SELL\",\n  \"quantity\": 5,\n  \"price\": 182.00\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": ["{{baseUrl}}"],
              "path": ["orders"]
            }
          },
          "response": []
        },
        {
          "name": "Get Order by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders/{{orderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "{{orderId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Get User Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders/user/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "user", "{{userId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Get Order Book",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders/security/{{securityId}}/book",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "security", "{{securityId}}", "book"]
            }
          },
          "response": []
        },
        {
          "name": "Get Account Trades",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders/account/{{accountId}}/trades",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "account", "{{accountId}}", "trades"]
            }
          },
          "response": []
        },
        {
          "name": "Cancel Order",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"reason\": \"Changed my mind\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/orders/{{orderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "{{orderId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "5. Loans",
      "item": [
        {
          "name": "Grant Loan",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201 || pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.loanId) {",
                  "        pm.collectionVariables.set('loanId', response.loanId);",
                  "        console.log('Loan ID saved:', response.loanId);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"accountId\": \"{{accountId}}\",\n  \"principal\": 25000,\n  \"annualRate\": 0.055,\n  \"termMonths\": 36,\n  \"insuranceRate\": 0.01\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loans/grant",
              "host": ["{{baseUrl}}"],
              "path": ["loans", "grant"]
            }
          },
          "response": []
        },
        {
          "name": "Get Loan by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/loans/{{loanId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loans", "{{loanId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Get Loan Schedule",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/loans/{{loanId}}/schedule",
              "host": ["{{baseUrl}}"],
              "path": ["loans", "{{loanId}}", "schedule"]
            }
          },
          "response": []
        },
        {
          "name": "Get User Loans",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/loans/user/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loans", "user", "{{userId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Calculate Loan Payment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"principal\": 50000,\n  \"annualRate\": 0.045,\n  \"termMonths\": 60,\n  \"insuranceRate\": 0.015\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loans/calculate-payment/preview",
              "host": ["{{baseUrl}}"],
              "path": ["loans", "calculate-payment", "preview"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "6. Chat & Messages",
      "item": [
        {
          "name": "Get Conversations",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/messages/conversations?userId={{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["messages", "conversations"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Conversation Messages",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/messages/conversations/{{conversationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["messages", "conversations", "{{conversationId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Get Unread Messages Count",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/messages/unread?userId={{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["messages", "unread"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "7. Notifications",
      "item": [
        {
          "name": "Get All Notifications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/notifications?userId={{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notifications"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Unread Notifications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/notifications?userId={{userId}}&unreadOnly=true",
              "host": ["{{baseUrl}}"],
              "path": ["notifications"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                },
                {
                  "key": "unreadOnly",
                  "value": "true"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Unread Count",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/notifications/unread-count?userId={{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "unread-count"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Mark Notification as Read",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/notifications/notification-id-here/read",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "notification-id-here", "read"]
            }
          },
          "response": []
        },
        {
          "name": "Mark All Notifications as Read",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/notifications/read-all?userId={{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "read-all"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "8. Server-Sent Events (SSE)",
      "item": [
        {
          "name": "SSE - Real-time Notifications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/sse/notifications?userId={{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["sse", "notifications"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            },
            "description": "**Note:** This is a Server-Sent Events endpoint. It maintains a persistent connection and streams events.\n\n**To test:**\n1. Use browser or EventSource client\n2. Or use Postman but expect continuous stream\n3. Events: ORDER_EXECUTED, LOAN_GRANTED, SAVINGS_RATE_CHANGED, PRIVATE_MESSAGE_SENT, ACCOUNT_CREDITED, ACCOUNT_DEBITED\n\n**Example JavaScript:**\n```javascript\nconst eventSource = new EventSource('http://localhost:3000/sse/notifications?userId=your-user-id');\neventSource.onmessage = (event) => {\n  console.log('Notification:', JSON.parse(event.data));\n};\n```"
          },
          "response": []
        }
      ]
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// This runs before every request",
          "console.log('Request to:', pm.request.url.toString());"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// This runs after every request",
          "if (pm.response.code >= 400) {",
          "    console.error('Error Response:', pm.response.json());",
          "} else {",
          "    console.log('Success:', pm.response.code);",
          "}"
        ]
      }
    }
  ]
}
